{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}
{{ 'quick-add.css' | asset_url | stylesheet_tag }}
{{ 'style.css' | asset_url | stylesheet_tag }}
<script src="{{ 'quick-add.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

{{ 'section-blog-post.css' | asset_url | stylesheet_tag }}

{% assign time = article.metafields.custom.preparation_time.value %}
{% assign servings = article.metafields.custom.number_of_servings.value %}
{% assign full_url = request.host | append: request.path %}


<article class="article blog">
  <div class="container">
    <div class="article__header">
      {% if article.tags.size > 0 %}
        <div class="article__subtitle small">
          {{ article.tags | first }}
        </div>
      {% endif %}
      <h1 class="article__title">
        {{ article.title }}
      </h1>
      <div class="article__inner">
        <div class="article__social">
            <a class="ShareButtons__Item ShareButtons__Item--facebook" href="https://www.facebook.com/sharer.php?u={{ full_url }}" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path
                    d="M22 12.0607C22 6.504 17.5233 2 12 2C6.47667 2 2 6.504 2 12.0607C2 17.0833 5.656 21.2453 10.4373 22V14.9693H7.89867V12.06H10.4373V9.844C10.4373 7.32267 11.93 5.92933 14.2147 5.92933C15.308 5.92933 16.4533 6.126 16.4533 6.126V8.602H15.1913C13.9493 8.602 13.5627 9.378 13.5627 10.174V12.0607H16.336L15.8927 14.9687H13.5627V22C18.344 21.2453 22 17.0833 22 12.0607Z"
                    fill="#047678"/>
              </svg>
            </a>
            <a class="ShareButtons__Item ShareButtons__Item--twitter" href="https://twitter.com/share?url={{ full_url }}" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path
                    d="M19.9525 7.9201C19.9647 8.09642 19.9647 8.27273 19.9647 8.45067C19.9647 13.8726 15.8371 20.1257 8.28966 20.1257V20.1224C6.06013 20.1257 3.8769 19.487 2 18.2829C2.32419 18.3219 2.65001 18.3414 2.97664 18.3422C4.82429 18.3438 6.61913 17.7239 8.07272 16.5823C6.31688 16.549 4.77717 15.4042 4.23928 13.7328C4.85436 13.8514 5.48812 13.8271 6.09181 13.6621C4.17753 13.2754 2.80033 11.5935 2.80033 9.64019C2.80033 9.62232 2.80033 9.60525 2.80033 9.58819C3.37071 9.90588 4.00934 10.0822 4.6626 10.1017C2.85964 8.89674 2.30388 6.49821 3.39265 4.62293C5.47593 7.1864 8.54966 8.7448 11.8493 8.90974C11.5186 7.4846 11.9703 5.9912 13.0364 4.98937C14.689 3.43585 17.2882 3.51547 18.8418 5.16731C19.7607 4.98612 20.6415 4.64893 21.4475 4.17117C21.1412 5.121 20.5001 5.92782 19.6437 6.44052C20.457 6.34464 21.2517 6.12689 22 5.79457C21.4491 6.62008 20.7552 7.33916 19.9525 7.9201Z"
                    fill="#047678"/>
              </svg>
            </a>
            <a class="ShareButtons__Item ShareButtons__Item--pinterest" href="https://pinterest.com/pin/create/button/?url={{ full_url }}" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path
                    d="M11.9959 2C6.4673 2 2 6.47552 2 11.9959C2 16.2328 4.63266 19.8527 8.3513 21.3089C8.2608 20.5191 8.18676 19.3015 8.3842 18.4377C8.5652 17.6561 9.55244 13.4685 9.55244 13.4685C9.55244 13.4685 9.25628 12.868 9.25628 11.9877C9.25628 10.5973 10.0625 9.56068 11.0662 9.56068C11.9218 9.56068 12.3332 10.2024 12.3332 10.9675C12.3332 11.8231 11.7902 13.1065 11.5023 14.2995C11.2637 15.2949 12.0041 16.1094 12.9831 16.1094C14.7602 16.1094 16.1259 14.2336 16.1259 11.5352C16.1259 9.1411 14.4064 7.471 11.9465 7.471C9.09996 7.471 7.42986 9.6018 7.42986 11.8067C7.42986 12.6623 7.75894 13.5837 8.1703 14.0856C8.25258 14.1843 8.2608 14.2748 8.23612 14.3735C8.16208 14.6861 7.9893 15.369 7.9564 15.5088C7.91526 15.6898 7.8083 15.731 7.61908 15.6405C6.38502 15.0481 5.61168 13.2217 5.61168 11.7573C5.61168 8.60634 7.8988 5.7104 12.218 5.7104C15.6816 5.7104 18.3801 8.17852 18.3801 11.4858C18.3801 14.9329 16.2081 17.7055 13.197 17.7055C12.1851 17.7055 11.2308 17.1789 10.9099 16.5537C10.9099 16.5537 10.4081 18.4624 10.2847 18.9313C10.0625 19.8034 9.45372 20.8893 9.04236 21.5557C9.98026 21.8437 10.9675 22 12.0041 22C17.5245 22 22 17.5245 22 12.0041C21.9918 6.47552 17.5162 2 11.9959 2Z"
                    fill="#047678"/>
              </svg>
            </a>
        </div>
        <div class="article__date">
          {{ article.published_at | date: "%-d %B %Y" }}
        </div>
      </div>
    </div>
    <div class="article__wrapper article__fl-wrapper">
      <div class="article__content">
        <div class="article__image">
          <picture>
            {% if article.image != blank %}
              <img src="{{ article.image | image_url }}" alt="{{ article.image.alt }}">
            {% else %}
              <img src="https://fotobym.com.ua/uploads/images/product/480/f37e95c0a03b0b49c82e71bdb81494a3.jpg"
                   alt=""/>
            {% endif %}
          </picture>
        </div>
        <div class="article__text article__float">
          {{ article.content }}
        </div>
        <p class="Article__Author Heading Text--subdued u-h6">Written by {{ article.author }}</p>
      </div>
    </div>
    {% if article.metafields.custom.products != blank %}
      <div class="article__products">
        <div class="article__prod-title center">
          Products from the article
        </div>
        <div class="article__slider article__slider--small swiper">
          <div class="article__prod-wrapper swiper-wrapper">
            {% for card_product in article.metafields.custom.products.value %}
              <div class="swiper-slide article__slider-slide">
                {% render 'card-product',
                    card_product: card_product,
                    show_secondary_image: false,
                    image_shape: 'default',
                    media_aspect_ratio: 'square',
                    show_vendor: true,
                    show_rating: false,
                    lazy_load: true,
                    show_quick_add: true,
                    section_id: section.id
                %}
              </div>
            {% endfor %}
          </div>
          <div class="banner__pagination"></div>
        </div>

      </div>
    {% endif %}
  </div>
  <div class="recipes__article">
  {%- if blog.comments_enabled? -%}
    <div class="article-template__comment-wrapper background-secondary">
      <div
          id="comments"
          class="container {% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
      >
        {%- if article.comments_count > 0 -%}
          {%- assign anchorId = '#Comments-' | append: article.id -%}

          <h2 id="Comments-{{ article.id }}" tabindex="-1">
            {{ 'blogs.article.comments' | t: count: article.comments_count }}
          </h2>
          {% paginate article.comments by 5 %}
            <div class="article-template__comments">
              {%- if comment.status == 'pending' and comment.content -%}
                <article id="{{ comment.id }}">
                  <div>
                    <header class="article-template__comments-comment-header">
                      <span class="caption-with-letter-spacing">{{ comment.author }}</span>
                    </header>
                  </div>
                  <div  class="article-template__comments-comment">
                    {{ comment.content }}
                  </div>
                </article>
              {%- endif -%}

              {%- for comment in article.comments -%}
                <article id="{{ comment.id }}">
                  <div>
                    <header class="article-template__comments-comment-header">
                      <span class="caption-with-letter-spacing">{{ comment.author }}</span>

                      <span class="caption-with-letter-spacing">
                        {{- comment.created_at | time_tag: format: 'date' -}}
                      </span>
                    </header>
                  </div>
                  <div  class="article-template__comments-comment">
                    {{ comment.content }}
                  </div>
                </article>
              {%- endfor -%}
              {% render 'pagination', paginate: paginate, anchor: anchorId %}
            </div>
          {% endpaginate %}
        {%- endif -%}

        {% form 'new_comment', article %}
          {%- liquid
            assign post_message = 'blogs.article.success'
            if blog.moderated? and comment.status == 'unapproved'
              assign post_message = 'blogs.article.success_moderated'
            endif
          -%}
          <h2>{{ 'blogs.article.comment_form_title' | t }}</h2>
          {%- if form.errors -%}
            <div class="form__message" role="alert">
              <h3 class="form-status caption-large text-body" tabindex="-1" autofocus>
                <span class="svg-wrapper">
                  {{- 'icon-error.svg' | inline_asset_content -}}
                </span>
                {{ 'templates.contact.form.error_heading' | t }}
              </h3>
            </div>
            <ul class="form-status-list caption-large">
              {%- for field in form.errors -%}
                <li>
                  <span class='link'>
                    {%- if form.errors.translated_fields[field] contains 'author' -%}
                      {{ 'blogs.article.name' | t }}
                    {%- elsif form.errors.translated_fields[field] contains 'body' -%}
                      {{ 'blogs.article.message' | t }}
                    {%- else -%}
                      {{ form.errors.translated_fields[field] }}
                    {%- endif -%}
                    {{ form.errors.messages[field] }}
                  </span>
                </li>
              {%- endfor -%}
            </ul>
          {%- elsif form.posted_successfully? -%}
            <div class="form-status-list form__message" role="status">
              <h3 class="form-status success" tabindex="-1" autofocus>
                <span class="svg-wrapper">
                  {{- 'icon-success.svg' | inline_asset_content -}}
                </span>
                {{ post_message | t }}
              </h3>
            </div>
          {%- endif -%}

          <div
              {% if blog.moderated? == false %}
                class="article-template__comments-fields"
              {% endif %}
          >
            <div class="article-template__comment-fields">
              <div class="field field--with-error">
                <input
                    type="text"
                    name="comment[author]"
                    id="CommentForm-author"
                    class="field__input"
                    autocomplete="name"
                    value="{{ form.author }}"
                    aria-required="true"
                    required
                    {% if form.errors contains 'author' %}
                      aria-invalid="true"
                      aria-describedby="CommentForm-author-error"
                    {% endif %}
                    placeholder="{{ 'blogs.article.name' | t }}"
                >
                <label class="field__label" for="CommentForm-author">
                  {{- 'blogs.article.name' | t }}
                  <span aria-hidden="true">*</span></label
                >
              </div>
              <div class="field field--with-error">
                <input
                    type="email"
                    name="comment[email]"
                    id="CommentForm-email"
                    autocomplete="email"
                    class="field__input"
                    value="{{ form.email }}"
                    autocorrect="off"
                    autocapitalize="off"
                    aria-required="true"
                    required
                    {% if form.errors contains 'email' %}
                      aria-invalid="true"
                      aria-describedby="CommentForm-email-error"
                    {% endif %}
                    placeholder="{{ 'blogs.article.email' | t }}"
                >
                <label class="field__label" for="CommentForm-email">
                  {{- 'blogs.article.email' | t }}
                  <span aria-hidden="true">*</span></label
                >
              </div>
            </div>
            <div class="field field--with-error">
              <textarea
                  rows="5"
                  name="comment[body]"
                  id="CommentForm-body"
                  class="text-area field__input"
                  aria-required="true"
                  required
                {% if form.errors contains 'body' %}
                  aria-invalid="true"
                  aria-describedby="CommentForm-body-error"
                {% endif %}
                placeholder="{{ 'blogs.article.message' | t }}"
              >{{ form.body }}</textarea>
              <label class="form__label field__label" for="CommentForm-body">
                {{- 'blogs.article.message' | t }}
                <span aria-hidden="true">*</span></label
              >
            </div>
          </div>
          {%- if blog.moderated? -%}
            <p class="article-template__comment-warning caption">{{ 'blogs.article.moderated' | t }}</p>
          {%- endif -%}
          <input type="submit" class="button" value="{{ 'blogs.article.post' | t }}">
        {% endform %}
      </div>
    </div>
    </div>
  {%- endif -%}
</article>

<script>
    const sliderImages = new Swiper('.article__slider', {
        slidesPerView: 1,
        loop: true,
        pagination: {
            el: '.banner__pagination',
        },
        breakpoints: {
            '992': {
                slidesPerView: 3,
            },
            '767': {
                slidesPerView: 2,
            },
        }
    });
</script>


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "articleBody": {{ article.content | strip_html | json }},
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": {{ request.origin | append: page.url | json }}
  },
  "headline": {{ article.title | json }},
{% if article.excerpt != blank %}
      "description": {{ article.excerpt | strip_html | json }},
    {% endif %}
    {% if article.image %}
      "image": [
        {{ article | image_url: width: 1920 | prepend: "https:" | json }}
      ],
    {% endif %}
  "datePublished": {{ article.published_at | date: '%Y-%m-%dT%H:%M:%SZ' | json }},
    "dateCreated": {{ article.created_at | date: '%Y-%m-%dT%H:%M:%SZ' | json }},
    "author": {
      "@type": "Person",
      "name": {{ article.author | json }}
  },
  "publisher": {
    "@type": "Organization",
    "name": {{ shop.name | json }}
  }
}
</script>

{% schema %}
{
  "name": "t:sections.main-article.name",
  "tag": "section",
  "class": "section"
}
{% endschema %}
